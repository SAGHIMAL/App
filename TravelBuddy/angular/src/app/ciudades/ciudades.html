<div class="container">
  <div class="card">
    
    <div class="card-header">
      <div class="card-title">
        <h3>Buscador de Ciudades</h3>
      </div>
    </div>

    <div class="card-body">
      
      <form class="row g-3 align-items-center mb-4" (ngSubmit)="onSearchChange()">
        
        <div class="col-md-5">
          <label class="visually-hidden" for="nombreInput">Nombre</label>
          <div class="input-group">
            <input 
              id="nombreInput"
              type="text" 
              class="form-control" 
              placeholder="Nombre (ej. Rio)..." 
              [(ngModel)]="textoBusqueda" 
              (ngModelChange)="onSearchChange()"
              name="textoBusqueda" 
            />
          </div>
        </div>

        <div class="col-md-2">
          <label class="visually-hidden" for="paisInput">País</label>
          <input 
            id="paisInput"
            type="text" 
            class="form-control" 
            placeholder="País (ej. AR)" 
            [(ngModel)]="filtroPais" 
            (ngModelChange)="onSearchChange()"
            name="filtroPais" 
            title="Código de país ISO (ej: AR, US, ES)"
          />
        </div>

        <div class="col-md-3">
          <label class="visually-hidden" for="poblacionInput">Población</label>
          <input 
            id="poblacionInput"
            type="number" 
            class="form-control" 
            placeholder="Población Mín." 
            [(ngModel)]="filtroPoblacion" 
            (ngModelChange)="onSearchChange()"
            name="filtroPoblacion" 
          />
        </div>

        <div class="col-md-2">
          <button type="submit" class="btn btn-primary w-100" [disabled]="cargando">
            <i class="fa fa-search me-1"></i>
            {{ cargando ? '...' : 'Buscar' }}
          </button>
        </div>

      </form>

      <div *ngIf="ciudades.length > 0">
        <table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>ID</th>
      <th>Nombre</th>
      <th>País</th>
      <th>Región</th>
      <th style="width: 120px; text-align: center">Acciones</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let ciudad of ciudades">
      <td>{{ ciudad.id }}</td>
      <td>{{ ciudad.city }}</td>
      <td>{{ ciudad.country }}</td>
      <td>{{ ciudad.region }}</td>
      
      <td class="text-center">
        <button 
          class="btn btn-sm btn-info text-white" 
          [routerLink]="['/ciudades/detalle', ciudad.id]"
          title="Ver detalles completos">
          <i class="fa fa-eye"></i> Ver
        </button>
      </td>

    </tr>
  </tbody>
</table>
      </div>

      <div *ngIf="ciudades.length === 0 && !cargando && textoBusqueda.length > 0" class="alert alert-light mt-3">
        <small class="text-muted">No hay resultados para mostrar.</small>
      </div>

    </div>
  </div>
</div>